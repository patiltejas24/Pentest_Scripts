import pycurl
import re
from StringIO import StringIO
from bs4 import BeautifulSoup
import os
#import argparse
#parser = argparse.ArgumentParser()
#parser.add_argument("domain",help="Domain Name")
#args = parser.parse_args()
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("domain", help="Email address from which Domain Name are registered")
args = parser.parse_args()
print(args.domain)

if args.domain:
	url="http://viewdns.info/reversewhois/?q=" + args.domain
	buffer = StringIO()
	c = pycurl.Curl()
	c.setopt(c.URL, url)
	c.setopt(c.WRITEDATA, buffer)
	c.perform()
	c.close()

	body = buffer.getvalue()
	soup = BeautifulSoup(body,"html.parser")

	td = soup.find_all('table')

	print td[3]
	flag=0
	a=[]
	start='<td>'
	end='</td>'
	for i in td[3].find_all('td'):
		flag=flag+1
		if flag>0:
			if (flag-1)%3 == 0:
##				print i
#				print i[1:-1]
				result = re.search('%s(.*)%s' % (start, end), str(i)).group(1)
				print result
